# Обзор архитектуры

[← Назад к оглавлению](README.md)

---

Архитектура построена на принципах:

- **Разделение ответственности** — каждый слой отвечает за свою задачу
- **Dependency Injection** — зависимости передаются явно
- **Domain-Driven Design** — структура отражает бизнес-домены
- **Clean Architecture** — бизнес-логика изолирована от инфраструктуры

## Слои приложения

```
┌─────────────────────────────────────────────────┐
│                    API Layer                     │
│            (endpoints, routers)                  │
├─────────────────────────────────────────────────┤
│                 Service Layer                    │
│           (бизнес-логика, оркестрация)          │
├─────────────────────────────────────────────────┤
│               Repository Layer                   │
│            (доступ к данным, CRUD)              │
├─────────────────────────────────────────────────┤
│                  Model Layer                     │
│         (ORM модели, структуры данных)          │
├─────────────────────────────────────────────────┤
│                  Core Layer                      │
│        (конфигурация, БД, общие утилиты)        │
└─────────────────────────────────────────────────┘
```

### Описание слоёв

| Слой | Назначение | Примеры |
|------|------------|---------|
| **API** | HTTP endpoints, маршрутизация, валидация запросов | `get.py`, `post.py`, роутеры |
| **Service** | Бизнес-логика, оркестрация, интеграции | `CandidateService`, `SearchOrchestrator` |
| **Repository** | CRUD операции, доступ к БД | `CandidateRepository` |
| **Model** | ORM модели, структуры данных | `CandidateModel`, `Enum` |
| **Core** | Конфигурация, подключение к БД | `config.py`, `database.py` |

## Поток данных

```
HTTP Request
    ↓
API Layer (валидация, Schema)
    ↓
Service Layer (бизнес-логика)
    ↓
Repository Layer (CRUD)
    ↓
Model Layer (ORM)
    ↓
Database
```

## Ключевые принципы

### 1. Однонаправленные зависимости

Каждый слой может зависеть только от слоёв ниже:
- API → Service → Repository → Model → Core
- Никогда наоборот

### 2. Единая ответственность

- **Repository** — только CRUD, без бизнес-логики
- **Service** — только бизнес-логика, без SQL
- **API** — только HTTP, без бизнес-логики

### 3. Группировка по сущностям

Внутри каждого слоя модули группируются по бизнес-сущностям:
```
model/
  candidate/
  search/
service/
  candidate/
  search/
```

---

[Далее: Структура проекта →](02-project-structure.md)
